From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Ryan Volz <ryan.volz@gmail.com>
Date: Thu, 23 Oct 2025 16:26:07 -0400
Subject: [PATCH] Use G_PI instead of M_PI

---
 docs/tools/shadow.c        | 2 +-
 tests/animated-resizing.c  | 6 +++---
 tests/motion-compression.c | 2 +-
 tests/video-timer.c        | 8 ++++----
 4 files changed, 9 insertions(+), 9 deletions(-)

diff --git a/docs/tools/shadow.c b/docs/tools/shadow.c
index 67c31fe..a025e9a 100644
--- a/docs/tools/shadow.c
+++ b/docs/tools/shadow.c
@@ -13,7 +13,7 @@ typedef struct {
 static double
 gaussian (double x, double y, double r)
 {
-    return ((1 / (2 * M_PI * r)) *
+    return ((1 / (2 * G_PI * r)) *
 	    exp ((- (x * x + y * y)) / (2 * r * r)));
 }
 
diff --git a/tests/animated-resizing.c b/tests/animated-resizing.c
index fbafe97..bea9ee2 100644
--- a/tests/animated-resizing.c
+++ b/tests/animated-resizing.c
@@ -55,7 +55,7 @@ ensure_resources(cairo_surface_t *target)
                               0.25);
         cairo_arc(cr,
                   i * DIAMETER + RADIUS, j * DIAMETER + RADIUS,
-                  RADIUS - 0.5, 0, 2 * M_PI);
+                  RADIUS - 0.5, 0, 2 * G_PI);
         cairo_fill_preserve(cr);
         cairo_set_source_rgba(cr,
                               ((i * 41) % 16) / 15.,
@@ -91,7 +91,7 @@ on_window_draw (GtkWidget *widget,
   for(i = 0; i < load_factor * 150; i++)
     {
       int source = g_rand_int_range(rand, 0, 255);
-      double phi = g_rand_double_range(rand, 0, 2 * M_PI) + angle;
+      double phi = g_rand_double_range(rand, 0, 2 * G_PI) + angle;
       double r = g_rand_double_range(rand, 0, width / 2 - RADIUS);
       int x, y;
 
@@ -117,7 +117,7 @@ on_frame (double progress)
 {
   int jitter;
 
-  angle = 2 * M_PI * progress;
+  angle = 2 * G_PI * progress;
   jitter = WINDOW_SIZE_JITTER * sin(angle);
 
   if (!cb_no_resize)
diff --git a/tests/motion-compression.c b/tests/motion-compression.c
index de6d9d6..c6dd77d 100644
--- a/tests/motion-compression.c
+++ b/tests/motion-compression.c
@@ -27,7 +27,7 @@ on_draw (GtkWidget *window,
 
   cairo_set_source_rgb (cr, 0, 0.5, 0.5);
 
-  cairo_arc (cr, cursor_x, cursor_y, 10, 0, 2 * M_PI);
+  cairo_arc (cr, cursor_x, cursor_y, 10, 0, 2 * G_PI);
   cairo_stroke (cr);
 }
 
diff --git a/tests/video-timer.c b/tests/video-timer.c
index cd137ee..e2b3155 100644
--- a/tests/video-timer.c
+++ b/tests/video-timer.c
@@ -108,7 +108,7 @@ create_frames_thread (gpointer data)
   while (TRUE)
     {
       FrameData *frame_data = g_slice_new0 (FrameData);
-      frame_data->angle = 2 * M_PI * (frame_count % fps) / (double)fps;
+      frame_data->angle = 2 * G_PI * (frame_count % fps) / (double)fps;
       frame_data->stream_time = (G_GINT64_CONSTANT (1000000) * frame_count) / fps;
 
       queue_frame (frame_data);
@@ -208,14 +208,14 @@ on_window_draw (GtkWidget *widget,
   r = MIN (allocation.width, allocation.height) / 2.;
 
   cairo_arc (cr, cx, cy, r,
-             0, 2 * M_PI);
+             0, 2 * G_PI);
   cairo_stroke (cr);
   if (displayed_frame)
     {
       cairo_move_to (cr, cx, cy);
       cairo_line_to (cr,
-                     cx + r * cos(displayed_frame->angle - M_PI / 2),
-                     cy + r * sin(displayed_frame->angle - M_PI / 2));
+                     cx + r * cos(displayed_frame->angle - G_PI / 2),
+                     cy + r * sin(displayed_frame->angle - G_PI / 2));
       cairo_stroke (cr);
 
       if (displayed_frame->frame_counter == 0)
-- 
2.51.0

